# ライブ運用マニュアル — LiveVJ

## 1. セットアップ手順

1. **Chrome 最新版** を用意する。
2. プロジェクトを **ローカルサーバ** で起動する。
   ```bash
   cd liveVj && python3 -m http.server 8000
   ```
3. ブラウザで **http://localhost:8000/** を開く。
4. キーボード操作で即座に使用可能。

---

## 2. キーボード操作一覧

### 基本パラメータ（連続入力）
キーを押し続けると値が連続的に変化します。

#### 粒子制御
| キー | 機能 | 備考 |
|------|------|------|
| Q | 粒子数 増加 | +5,000/秒 |
| A | 粒子数 減少 | -5,000/秒 |
| Shift+Q | 粒子数 大幅増加 | +50,000/秒 |
| Shift+A | 粒子数 大幅減少 | -50,000/秒 |

#### 色制御（HSL）
| キー | 機能 | 範囲 |
|------|------|------|
| W | 彩度 増加 | 0.0-1.0 |
| S | 彩度 減少 | 0.0-1.0 |
| E | 明度 増加 | 0.2-1.0 |
| D | 明度 減少 | 0.2-1.0 |
| R | 色相 +回転 | 0.0-1.0 (ループ) |
| F | 色相 -回転 | 0.0-1.0 (ループ) |

#### 回転制御
| キー | 機能 | 範囲 |
|------|------|------|
| T | X軸回転速度 増加 | -0.01〜0.01 rad/frame |
| G | X軸回転速度 減少 | -0.01〜0.01 rad/frame |
| Y | Y軸回転速度 増加 | -0.01〜0.01 rad/frame |
| H | Y軸回転速度 減少 | -0.01〜0.01 rad/frame |

#### その他
| キー | 機能 | 範囲 |
|------|------|------|
| U | 色変化速度 増加 | 0.5-2.0倍 |
| J | 色変化速度 減少 | 0.5-2.0倍 |
| I | ノイズ強度 増加 | 0.0-1.0 |
| K | ノイズ強度 減少 | 0.0-1.0 |

---

### エフェクト強度制御（連続入力）

#### エフェクトセットA（ブルーム+トレイル+ワープ）
| キー | 機能 | 範囲 |
|------|------|------|
| Z | ブルーム強度 増加 | 0.0-2.0 |
| X | ブルーム強度 減少 | 0.0-2.0 |
| C | トレイル強度 増加 | 0.0-1.0 |
| V | トレイル強度 減少 | 0.0-1.0 |
| B | ワープ強度 増加 | 0.0-0.3 |
| N | ワープ強度 減少 | 0.0-0.3 |

#### エフェクトセットB（グリッチ+色収差）
| キー | 機能 | 範囲 |
|------|------|------|
| M | グリッチ強度 増加 | 0.0-1.0 |
| , | グリッチ強度 減少 | 0.0-1.0 |
| . | 色収差強度 増加 | 0.0-5.0px |
| / | 色収差強度 減少 | 0.0-5.0px |

---

### トグル操作（1回押下）

#### エフェクト・レイヤー
| キー | 機能 |
|------|------|
| 1 | エフェクトセットA（ブルーム+トレイル+ワープ）ON/OFF |
| 2 | エフェクトセットB（グリッチ+色収差）ON/OFF |
| 3 | 全エフェクト OFF |
| 4 | レイヤー1 ON/OFF |
| 5 | レイヤー2 ON/OFF |
| 6 | レイヤー3 ON/OFF |

#### プリセット
| キー | 機能 |
|------|------|
| 7 | プリセット1 呼び出し |
| 8 | プリセット2 呼び出し |
| Cmd+1/2/3 | 現在状態をスロット1/2/3に保存 |
| Shift+1/2/3 | スロット1/2/3から読み込み |

#### システム
| キー | 機能 |
|------|------|
| 0 | 全リセット（初期状態に戻る）|
| Cmd+R | 全リセット（Cmd+R でリロード防止）|
| P | デバッグUI 表示切替 |

---

## 3. 同時押し対応

複数のキーを同時に押しても正常に動作します。

**例:**
- **Q + W + Z** を同時押し → 粒子数・彩度・ブルーム強度が同時に変化
- **Shift+Q + Z** を同時押し → 粒子数大幅増加 + ブルーム強度増加
- **R + T + M** を同時押し → 色相回転 + X軸回転 + グリッチ強度増加

---

## 4. トラブルシューティング

- **「WebGL2 未対応」**: Chrome を使用し、ハードウェアアクセラレーションを有効にしてください。
- **FPS が落ちる**: 粒子数（Q/A）を下げる。エフェクトセット（1/2）を OFF にする。
- **プリセットが読み込めない**: `presets.json` がルートにあり、同じオリジンで配信されているか確認。
- **キーが反応しない**: ブラウザのコンソール（F12）でエラーを確認してください。

---

## 5. パフォーマンスチューニングのヒント

- 目標 60fps を切る場合、品質マネージャが自動で粒子数・エフェクトを削減します。
- ブルーム（Z/X キー）は負荷が高いため、必要時のみ調整すると安定します。
- トレイル（C/V キー）とワープ（B/N キー）は FPS 低下時に自動で削減されることがあります。

---

## 6. プリセット作成ガイド

1. キーボードで好みの状態を作る。
2. **Cmd+1**（または 2, 3）で現在の状態をスロットに保存。
3. 別シーンでは **Shift+1**（または 2, 3）でそのスロットを呼び出し。
4. ファイルベースのプリセットは `presets.json` を編集してください。

---

## 7. 初期パラメータ

リセット（キー 0 または Cmd+R）で以下の値に戻ります：

```
粒子数: 100,000
色相: 0.0（赤）
彩度: 0.0（白）
明度: 0.9（明るい）
回転速度X: 0.001
回転速度Y: 0.002
ノイズ強度: 0.2
色変化速度: 1.0倍

ブルーム強度: 0.8
トレイル強度: 0.0
ワープ強度: 0.0
グリッチ強度: 0.0
色収差強度: 0.0

エフェクトセットA: OFF
エフェクトセットB: OFF
```

---

## 8. よくあるシナリオ

### シナリオ1: 高速な粒子回転のみ表現
1. **Shift+Q** で粒子数を大幅増加（200,000 程度）
2. **T** を長押ししてX軸回転速度を上げる
3. **Y** を長押ししてY軸回転速度を上げる
4. 必要に応じて **Z** でブルーム強度をアップ

### シナリオ2: 虹色グラデーション
1. **E** を押して明度を 0.95 程度に設定
2. **W** を押して彩度を 1.0 に設定
3. **R** を連続で押して色相をゆっくり回転させる
4. **U** で色変化速度を上げるとアニメーション効果が出る

### シナリオ3: グリッチエフェクト
1. **2** を押してエフェクトセットB（グリッチ+色収差）をON
2. **M** でグリッチ強度を調整
3. **.** で色収差を調整
4. 必要に応じて **I** でノイズ強度を上げる

---

## 9. キーボードレイアウト参考図

```
Q  W  E  R  T  Y  U  I  O  P
┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│粒│彩│明│色│回│回│速│ノ│  │切│
│増│増│増│+│X│Y│+│増│  │り│
├──┼──┼──┼──┼──┼──┼──┼──┼──┼──┤
│粒│彩│明│色│回│回│速│ノ│  │  │
│減│減│減│-│X│Y│-│減│  │  │
└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘

A  S  D  F  G  H  J  K  L  P
┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│粒│彩│明│色│回│回│速│ノ│  │デ│
│減│減│減│-│X│Y│-│減│  │切│
└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘

Z  X  C  V  B  N  M  ,  .  /
┌──┬──┬──┬──┬──┬──┬──┬──┬──┬──┐
│ブ│ブ│ト│ト│ワ│ワ│グ│グ│色│色│
│+│-│+│-│+│-│+│-│+│-│
└──┴──┴──┴──┴──┴──┴──┴──┴──┴──┘

1  2  3  4  5  6  7  8  0
┌──┬──┬──┬──┬──┬──┬──┬──┬──┐
│A│B│全│L1│L2│L3│P1│P2│リ│
│切│切│OFF│切│切│切│読│読│セ│
└──┴──┴──┴──┴──┴──┴──┴──┴──┘

修飾キー:
- Shift+Q/A: 粒子数大幅変化
- Cmd+1/2/3: プリセット保存
- Shift+1/2/3: プリセット読み込み
- Cmd+R: リセット
```

---

ライブパフォーマンスでキーボード操作を最大限活用してください！
